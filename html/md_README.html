<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: SIR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SIR </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Standard Incident Reporter; simple logging to file, debug and stdout/stderr</p>
<blockquote class="doxtable">
<p>NOTE: This code is ancient; I wrote it in 2003. It may not compile at all. I have placed it here for posterity. </p>
</blockquote>
<h2>Description</h2>
<p>Sir is a cross-platform ANSI C library that provides developers with much needed, usually repetitive functionality. Any application of moderate size or complexity requires program output to be sent to various locations, namely the console, log files, a debug window, or GUI. Writing the code to do this is painfully repetitious. Enter Sir.</p>
<p>By adding sir to your application's code base, you can perform information output tasks in no time flat. Sir provides functionality that allows you to easily send formatted output to one or more of these destinations simultaneously with one function call:</p>
<ul>
<li>stdout/stderr</li>
<li>Log files</li>
<li>Callback functions</li>
<li>Debug (Windows)</li>
</ul>
<p>Sir has the capability to prepend output with a standard format timestamp (time()/ctime()), and append carriage return/line feed. Also, Sir may be implemented in C++ applications.</p>
<h3>Types and return values</h3>
<p>Sir uses the type TCHAR frequently. This type is simply either an 8-bit character when the program being built is ANSI, or a 16-bit character when the program is in UNICODE mode. In addition, Sir makes use of the macro _T, which, on Windows if UNICODE is being used, transforms string literals to L"String". If you're not using Sir on Windows, you do not need to worry about the _T macro.</p>
<p>All Sir functions return type int unless otherwise specified. The success code is zero, and if an error occurs, -1 will be returned.</p>
<h3>Implementation</h3>
<p>Implementing Sir in your application is extremely easy. I have provided it in various forms, including source code, compiled static libraries (debug/release, ANSI/UNICODE builds), and a makefile for a shared library. The following section will show example usage.</p>
<p>### Example </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sir_8h.html">sir.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Sir type callback function</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keywordtype">void</span> SirCallback(TCHAR *out, u_long data);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, TCHAR *argv[]) {</div><div class="line">  <a class="code" href="structsirinit.html">sirinit</a> ss = {0}; <span class="comment">/* Declare the Sir initialization structure */</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Output of types SIRL_LOG and SIRT_WARNING</span></div><div class="line"><span class="comment">  will be sent to stdout.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  ss.f_stdout = SIRL_LOG | SIRT_WARNING;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Output of type SIRL_WARN will be sent</span></div><div class="line"><span class="comment">  to debug.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  ss.f_debug = SIRT_WARNING;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Output of types SIRL_ERROR and SIRT_CRIT</span></div><div class="line"><span class="comment">  will be sent to stderr.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  ss.f_stderr = <a class="code" href="sir_8h.html#a4a3303c67acd49bea38fd3565d458cb2a9c687f088db1de838ea5d5f8a8beed76">SIRL_ERROR</a> | SIRT_CRIT;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Set the option bits (Sir.h);</span></div><div class="line"><span class="comment">  SIRO_CRLF = \r\n will be appended to output,</span></div><div class="line"><span class="comment">  SIRO_TIMESTAMP = Time will be prepended to output,</span></div><div class="line"><span class="comment">  SIRO_FILES = Sir will handle file output,</span></div><div class="line"><span class="comment">  SIRO_CALLBACKS = Sir will handle callback output</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  ss.opts = SIRO_CRLF | SIRO_TIMESTAMP | SIRO_FILES | SIRO_CALLBACKS;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Initialize the Sir system.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">  <span class="keywordflow">if</span>(0 != Sir_Init(&amp;ss)) {</div><div class="line">    printf(<span class="stringliteral">&quot;Failed to initialize the Sir system!\n&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">  } <span class="keywordflow">else</span> {</div><div class="line">    printf(<span class="stringliteral">&quot;Successfully initialized the Sir system.\n&quot;</span>);</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Add a file for output of types SIRL_WARN and SIRT_LOG.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  <span class="keywordflow">if</span>(0 != Sir_AddFile(_T(<span class="stringliteral">&quot;sir.log&quot;</span>), <a class="code" href="sir_8h.html#a4a3303c67acd49bea38fd3565d458cb2a9bfe1efbd321a009ad518b2eaec35881">SIRL_WARN</a> | SIRT_LOG)) {</div><div class="line">    printf(<span class="stringliteral">&quot;Failed to add file to Sir system!\n&quot;</span>);</div><div class="line">  } <span class="keywordflow">else</span> {</div><div class="line">    printf(<span class="stringliteral">&quot;Successfully associated &#39;sir.log&#39; with SIRT_WARNING&quot;</span></div><div class="line">           <span class="stringliteral">&quot; and SIRL_LOG output types.\n&quot;</span>);</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Add a callback for output types of SIRT_SCREEN.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  <span class="keywordflow">if</span>(0 != Sir_AddCallback(SirCallback, SIRL_SCREEN, 0U)) {</div><div class="line">    printf(<span class="stringliteral">&quot;Failed to add callback to Sir system!\n&quot;</span>);</div><div class="line">  } <span class="keywordflow">else</span> {</div><div class="line">    printf(<span class="stringliteral">&quot;Successfully associated SirCallback() with SIRT_SCREEN&quot;</span></div><div class="line">           <span class="stringliteral">&quot; output type.\n&quot;</span>);</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Send output to all its destinations with one call!</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Sent to all destinations associated with type SIRL_WARN or SIRT_LOG</span></div><div class="line"><span class="comment">  (or both).</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  Sir(<a class="code" href="sir_8h.html#a4a3303c67acd49bea38fd3565d458cb2a9bfe1efbd321a009ad518b2eaec35881">SIRL_WARN</a> | SIRT_LOG, _T(<span class="stringliteral">&quot;This is a test of the Sir system. This is&quot;</span>)</div><div class="line">      _T(<span class="stringliteral">&quot; only a test. %d, %d, %d&quot;</span>), 1, 2, 3);</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Sent to all destinations associated with type SIRL_ERROR or SIRT_SCREEN</span></div><div class="line"><span class="comment">  (or both).</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  Sir(<a class="code" href="sir_8h.html#a4a3303c67acd49bea38fd3565d458cb2a9c687f088db1de838ea5d5f8a8beed76">SIRL_ERROR</a> | SIRT_SCREEN, _T(<span class="stringliteral">&quot;This is a continuation of the Sir system&quot;</span>)</div><div class="line">      _T(<span class="stringliteral">&quot; test.&quot;</span>));</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Remove the file and callback (disassociates them with output types).</span></div><div class="line"><span class="comment"> */</span></div><div class="line">  Sir_RemFile(_T(<span class="stringliteral">&quot;sir.log&quot;</span>));</div><div class="line"></div><div class="line">  Sir_RemCallback (SirCallback);</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Free allocated resources and reset</span></div><div class="line"><span class="comment">  the system&#39;s state</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">  Sir_Cleanup ();</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h3>Constants</h3>
<h4>Options</h4>
<ul>
<li><code>SIRO_TIMESTAMP</code> : Output will be prepended with a timestamp.</li>
<li><code>SIRO_CRLF</code> : Output will be appended with a carriage return and line feed.</li>
<li><code>SIRO_FILES</code> : Enables the use of disk files for output.</li>
<li><code>SIRO_CALLBACKS</code> : Enables the use of callback functions for output.</li>
<li><code>SIRO_DEFAULT</code> : Functionally equivalent to SIRO_TIMESTAMP and SIRO_CRLF. Sir will use this option if none are specified.</li>
</ul>
<h4>Logging levels</h4>
<ul>
<li><code>SIRL_DEBUG</code> : For debugging information.</li>
<li><code>SIRL_ERROR</code> : To report errors (non-fatal).</li>
<li><code>SIRL_WARN</code> : To report warnings or notifications.</li>
<li><code>SIRL_CRIT</code> : To report fatal errors.</li>
<li><code>SIRL_LOG</code> : For outputting logging data.</li>
<li><code>SIRL_SCREEN</code> : For outputting information to the user. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
