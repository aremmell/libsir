#include "chsir.h"

uint16_t
sir_geterror(char message[SIR_MAXERROR]) {
    void *fptr;
    uint16_t retval;

    fptr = dlsym(_Chsir_handle, "sir_geterror_chdl");
    if (fptr == NULL) {
        fprintf(_stderr, "Error: %s(%d): dlsym(): %s\n",
                __func__, __LINE__, dlerror());
        return 0;
    }
    dlrunfun(fptr, &retval, sir_geterror, message);

    return retval;
}
