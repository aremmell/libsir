\doxysection{example.\+c}
\hypertarget{example_8c_source}{}\label{example_8c_source}\index{example/example.c@{example/example.c}}
\mbox{\hyperlink{example_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00033}00033\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sir_8h}{sir.h}}>}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00034}00034\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{sirhelpers_8h}{sirhelpers.h}}>}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00036}00036\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00037}00037\ \textcolor{comment}{\ *\ This\ is\ a\ basic\ example\ of\ initializing\ and\ setting\ up\ libsir\ for\ use.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00038}00038\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00039}00039\ \textcolor{comment}{\ *\ NOTE:\ You\ can\ build\ this\ CLI\ app\ yourself\ using\ \`{}make\ example`\ or\ the}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00040}00040\ \textcolor{comment}{\ *\ Visual\ Studio\ [Code]\ project\ files.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00041}00041\ \textcolor{comment}{\ *\ }}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00042}00042\ \textcolor{comment}{\ *\ When\ the\ program\ is\ finished\ running,\ you\ can\ see\ the\ output\ in\ the\ console,\ and}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00043}00043\ \textcolor{comment}{\ *\ examine\ the\ contents\ of\ 'libsir-\/example.log'\ in\ the\ current\ directory.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00044}00044\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00046}00046\ \textcolor{keywordtype}{int}\ report\_error(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00048}00048\ \textcolor{keywordtype}{int}\ main(\textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}**\ argv)\ \{}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00050}00050\ \ \ \ \ \mbox{\hyperlink{group__intern_gaec5f4c31b60aca6a62b01e7188e91e08}{\_SIR\_UNUSED}}(argc);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00051}00051\ \ \ \ \ \mbox{\hyperlink{group__intern_gaec5f4c31b60aca6a62b01e7188e91e08}{\_SIR\_UNUSED}}(argv);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00053}00053\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00054}00054\ \textcolor{comment}{\ \ \ \ \ *\ Instantiate\ the\ initialization\ structure.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00055}00055\ \textcolor{comment}{\ \ \ \ \ *\ }}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00056}00056\ \textcolor{comment}{\ \ \ \ \ *\ NOTE:\ It\ is\ not\ necessary\ to\ retain\ this\ structure\ in\ memory;}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00057}00057\ \textcolor{comment}{\ \ \ \ \ *\ libsir\ makes\ a\ copy\ of\ it\ before\ returning\ from\ sir\_init.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00058}00058\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00059}00059\ \ \ \ \ \mbox{\hyperlink{group__public_structsirinit}{sirinit}}\ si\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00061}00061\ \ \ \ \ \textcolor{comment}{/*\ Configure\ levels\ for\ stdout.\ Send\ debug,\ information,\ warning,\ and\ notice\ messages\ there.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00062}00062\ \ \ \ \ si.\mbox{\hyperlink{group__public_abdce8407bc07b5c7bdb945bd3797dea5}{d\_stdout}}.levels\ =\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a3553c8c2c35e70495b8f8e826aa3ff9b}{SIRL\_DEBUG}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a5882fd7e849f6a3c1c7967bde4ef4f7d}{SIRL\_INFO}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a9bfe1efbd321a009ad518b2eaec35881}{SIRL\_WARN}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a721700c8091aab00db0b87b53f6eb53a}{SIRL\_NOTICE}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00064}00064\ \ \ \ \ \textcolor{comment}{/*\ Configure\ options\ for\ stdout.\ Don't\ show\ the\ time\ stamp,\ process\ ID,\ or\ thread\ ID.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00065}00065\ \ \ \ \ si.\mbox{\hyperlink{group__public_abdce8407bc07b5c7bdb945bd3797dea5}{d\_stdout}}.opts\ =\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40baeafb73ebdeb2df401d9fdfc39734fc8d}{SIRO\_NOTIME}}\ |\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40babbdc2529081d58ebff50a8966db31fd2}{SIRO\_NOPID}}\ |\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40ba7079a31d6035c24aaa94d85c4a89c053}{SIRO\_NOTID}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00067}00067\ \ \ \ \ \textcolor{comment}{/*\ Configure\ levels\ for\ stderr.\ Send\ error\ and\ above\ there.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00068}00068\ \ \ \ \ si.\mbox{\hyperlink{group__public_ac66a688f2db4be6a408b8c570ffd0811}{d\_stderr}}.levels\ =\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a9c687f088db1de838ea5d5f8a8beed76}{SIRL\_ERROR}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a803f36256e5e4e3b788b7fa3a267a435}{SIRL\_CRIT}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a8ea85ed68763f9c00d5ceeeaaf550955}{SIRL\_ALERT}}\ |\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a4ea9abe160c997d126806c4cca7f0cdc}{SIRL\_EMERG}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00070}00070\ \ \ \ \ \textcolor{comment}{/*\ Configure\ options\ for\ stderr.\ Don't\ show\ the\ process\ ID\ or\ thread\ ID.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00071}00071\ \ \ \ \ si.\mbox{\hyperlink{group__public_ac66a688f2db4be6a408b8c570ffd0811}{d\_stderr}}.opts\ =\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40babbdc2529081d58ebff50a8966db31fd2}{SIRO\_NOPID}}\ |\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40ba7079a31d6035c24aaa94d85c4a89c053}{SIRO\_NOTID}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00073}00073\ \ \ \ \ \textcolor{comment}{/*\ Configure\ options\ for\ syslog.\ Don't\ send\ any\ output\ there.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00074}00074\ \ \ \ \ si.\mbox{\hyperlink{group__public_a86b187f809d969f08dd2edef0e4cb248}{d\_syslog}}.levels\ =\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a7cc68341661fcb7a505aca67edb7a18e}{SIRL\_NONE}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00076}00076\ \ \ \ \ \textcolor{comment}{/*\ Configure\ a\ name\ to\ associate\ with\ our\ output.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00077}00077\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ appname\ =\ \textcolor{stringliteral}{"{}myapp"{}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00078}00078\ \ \ \ \ \mbox{\hyperlink{group__intern_ga45a2711d677382329eef2dbcbf420aa2}{\_sir\_strncpy}}(si.\mbox{\hyperlink{group__public_a20d83462a804b9eb5e664f3f470f780e}{processName}},\ \mbox{\hyperlink{group__custom_ga85ed3139018ee9e7545c74c0885dff55}{SIR\_MAXNAME}},\ appname,\ strnlen(appname,\ \mbox{\hyperlink{group__custom_ga85ed3139018ee9e7545c74c0885dff55}{SIR\_MAXNAME}}));}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00080}00080\ \ \ \ \ \textcolor{comment}{/*\ Initialize\ libsir.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00081}00081\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{group__public_gaa4f5707f5e4ed9702cde75a8c80c4e4a}{sir\_init}}(\&si))}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ report\_error();}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00084}00084\ \ \ \ \ \textcolor{comment}{/*\ Configure\ and\ add\ a\ log\ file;\ don't\ log\ the\ process\ name,\ and\ send\ all\ levels\ there.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00085}00085\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{group__public_ga1d2f790e2dabc69c8a625f2ee5dc583a}{sirchar\_t}}*\ log\_file\_name\ =\ \textcolor{stringliteral}{"{}libsir-\/example.log"{}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00086}00086\ \ \ \ \ \mbox{\hyperlink{group__public_gab8f5ba0bae678457f8bce30e961c9eb6}{sirfileid\_t}}\ fileid1\ =\ \mbox{\hyperlink{group__public_ga4db9ea5b34afaa585f6b9cda84f385e9}{sir\_addfile}}(log\_file\_name,\ \mbox{\hyperlink{group__public_gga4a3303c67acd49bea38fd3565d458cb2a4aa4a7193f36bf34a21ab48a17ffc444}{SIRL\_ALL}},\ \mbox{\hyperlink{group__public_gga9ed1c599dfd76231f4e0dadf46bff40ba59020fdfee0aaf393ed80ef7bab4bb4e}{SIRO\_NONAME}});}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{if}\ (NULL\ ==\ fileid1)}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ report\_error();}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00091}00091\ \ \ \ \ \textcolor{comment}{/*\ Now\ we're\ ready\ to\ start\ generating\ output.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00092}00092\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ 12345;}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00093}00093\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ somestr\ =\ \textcolor{stringliteral}{"{}some\ string\ that's\ useful"{}};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00094}00094\ \ \ \ \ \textcolor{keywordtype}{float}\ f\ =\ 0.09f;}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00096}00096\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00097}00097\ \textcolor{comment}{\ \ \ \ \ *\ This\ will\ be\ sent\ to\ all\ destinations\ registered\ for\ ::SIRL\_DEBUG.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00098}00098\ \textcolor{comment}{\ \ \ \ \ *\ Notice\ that\ it\ is\ not\ necessary\ to\ add\ a\ newline\ at\ the\ end.\ libsir\ does}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00099}00099\ \textcolor{comment}{\ \ \ \ \ *\ this\ automatically.}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00100}00100\ \textcolor{comment}{\ \ \ \ \ */}\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00101}00101\ \ \ \ \ \mbox{\hyperlink{group__public_ga3580e004c0c568c225a6d1a1bc5e9ea2}{sir\_debug}}(\textcolor{stringliteral}{"{}some\ debug\ data:\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00103}00103\ \ \ \ \ \textcolor{comment}{/*\ Do\ the\ same\ for\ the\ rest\ of\ available\ severity\ levels.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00104}00104\ \ \ \ \ \mbox{\hyperlink{group__public_ga707b1de6ceee2e3091b7d4ecf0f8758e}{sir\_info}}(\textcolor{stringliteral}{"{}some\ information:\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00106}00106\ \ \ \ \ \mbox{\hyperlink{group__public_gab17d7622664c42afaafa66c53542dfeb}{sir\_notice}}(\textcolor{stringliteral}{"{}consider\ yourself\ on\ notice:\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00108}00108\ \ \ \ \ \mbox{\hyperlink{group__public_ga3c4ca38dbb2a5e99e2d862dfdbd6f97a}{sir\_warn}}(\textcolor{stringliteral}{"{}a\ stern\ warning\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00110}00110\ \ \ \ \ \mbox{\hyperlink{group__public_gace667f9ba844f541bc41c61c94ed93f3}{sir\_error}}(\textcolor{stringliteral}{"{}uh-\/oh,\ an\ error\ has\ occurred\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00112}00112\ \ \ \ \ \mbox{\hyperlink{group__public_ga29cff3ca15309cca61066870674f54c3}{sir\_crit}}(\textcolor{stringliteral}{"{}we've\ reached\ critical\ mass\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00114}00114\ \ \ \ \ \mbox{\hyperlink{group__public_ga48e9fb49c28b31a09d48eb0e90468679}{sir\_alert}}(\textcolor{stringliteral}{"{}sound\ the\ alarm!\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);\ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00116}00116\ \ \ \ \ \mbox{\hyperlink{group__public_gabace08a061ddb85494e28bd3a518bb58}{sir\_emerg}}(\textcolor{stringliteral}{"{}somebody\ call\ 911\ \{n=\%d,\ somestr='\%s',\ f=\%.04f\}"{}},\ n,\ somestr,\ f);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00118}00118\ \ \ \ \ \textcolor{comment}{/*\ Clean\ up.\ */}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00119}00119\ \ \ \ \ \mbox{\hyperlink{group__public_ga9bf3e92cefac01de4e3c6c359a58706f}{sir\_cleanup}}();}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00121}00121\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00122}00122\ \}}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{example_8c_source_l00124}00124\ \textcolor{keywordtype}{int}\ report\_error(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00125}00125\ \ \ \ \ \mbox{\hyperlink{group__public_ga1d2f790e2dabc69c8a625f2ee5dc583a}{sirchar\_t}}\ message[\mbox{\hyperlink{group__custom_gad6fce840144259e992c33fb611f31262}{SIR\_MAXERROR}}]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00126}00126\ \ \ \ \ uint16\_t\ code\ =\ \mbox{\hyperlink{group__errors_ga98d098b444b4e8096aad21df81105e74}{sir\_geterror}}(message);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00127}00127\ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}libsir\ error:\ (\%hu,\ \%s)\(\backslash\)n"{}},\ code,\ message);}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00128}00128\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{example_8c_source_l00129}00129\ \}}

\end{DoxyCode}
